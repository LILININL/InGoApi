# InGo Auth API ‚Äì ‡πÅ‡∏≠‡∏õ‡∏°‡πà‡∏ß‡∏ô‡πÅ‡∏ï‡πä‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏≤‡∏¢‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü API

REST API ‡∏†‡∏≤‡∏©‡∏≤ Go ‡∏ï‡∏µ‡πâ‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡πã‡∏°‡∏≤‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏¥‡πã‡∏ô‡∏•‡∏≥‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô ‡∏Æ‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏Ñ‡∏ô ‡∏Å‡∏∂‡πä‡∏î‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ö‡∏ö‡∏ö‡∏∞‡∏ï‡∏∂‡∏á‡∏Ç‡∏≤‡∏î‡∏ï‡∏≠‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏° Swagger ‡πÑ‡∏ß‡πâ‡πÇ‡∏ä‡∏ß‡πå‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏´‡∏∑‡πâ‡∏≠‡∏Ñ‡∏ô‡πÉ‡∏ô‡∏Å‡πä‡∏ß‡∏ô‡πÄ‡∏ö‡∏¥‡πà‡∏á‡∏á‡πà‡∏≤‡∏¢ ‡πÜ

## ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏ô‡πà‡∏≤‡∏Æ‡∏±‡∏Å
- Auth flow ‡∏Ñ‡∏£‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á: ‡∏™‡∏°‡∏±‡∏Ñ‡∏£, ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô, ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ error ‡∏´‡∏∑‡πâ‡∏≠‡πÄ‡∏´‡πá‡∏ô‡πÉ‡∏à‡πã‡πÄ‡∏à‡πâ‡∏≤
- Hash password ‡∏ù‡∏±‡πà‡∏á client ‡∏î‡πâ‡∏ß‡∏¢ SHA-256 ‡πÅ‡∏•‡πâ‡∏ß‡∏ù‡∏±‡πà‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÉ‡∏ä‡πâ Argon2id ‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠ ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏™‡∏≤‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏™‡πà‡∏ß‡∏ô email/name ‡∏™‡πà‡∏á plain text ‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
- Repository pattern ‡πÅ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å service ‡∏Å‡∏∞‡∏ó‡∏±‡∏î‡∏£‡∏±‡∏î ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏¢‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ö‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏•‡∏±‡πä‡∏ß
- Static OpenAPI + Swagger UI ‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡∏à‡∏≤‡∏Å `/docs/` ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏∑‡πâ‡∏≠ Frontend ‡πÅ‡∏≠‡πà‡∏ß‡∏Å‡∏≤‡∏á‡πÑ‡∏î‡πâ‡∏ï‡∏ß‡∏¢‡∏ï‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤
- CORS middleware ‡∏ï‡∏∂‡∏á‡πÄ‡∏ï‡∏∑‡πâ‡∏≠ ‡∏´‡∏∑‡πâ‡∏≠ client ‡∏ù‡∏±‡πà‡∏á browser ‡∏Ç‡πâ‡∏≤‡∏°‡πÇ‡∏î‡πÄ‡∏°‡∏ô‡∏°‡∏≤‡∏´‡∏≤‡∏Å‡∏±‡πã‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô ‡πÜ

## ‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡πã‡∏ô‡πÉ‡∏ô‡∏Ñ‡∏£‡∏±‡∏ß
- **Go 1.25** ‡πÉ‡∏ä‡πâ `net/http` ‡∏•‡πâ‡∏ß‡∏ô ‡πÜ ‡∏ö‡∏∞‡∏á‡πâ‡∏≠ framework ‡∏´‡∏ô‡∏±‡∏Å
- **pgx/v5** ‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö **PostgreSQL 16** ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏µ‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö
- **Docker Compose** ‡∏°‡∏±‡∏î‡∏£‡∏ß‡∏° API + Database ‡∏Å‡∏î‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏•‡∏∏‡∏Å
- ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏£‡πà‡∏≤‡∏ß ‡πÜ ‡∏´‡∏∑‡πâ‡∏≠‡∏Å‡∏∂‡πä‡∏î‡∏†‡∏≤‡∏û‡∏≠‡∏≠‡∏Å
  ```
  cmd/server        # main server ‡∏ï‡∏µ‡πâ‡∏Ñ‡∏∏‡∏° http.Server
  internal/auth     # business logic ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô
  internal/user     # user service + repository
  internal/httpapi  # handler, router, middleware, DTO
  internal/db       # ‡πÄ‡∏õ‡∏¥‡∏î pgx connection pool
  docs              # OpenAPI + Swagger UI
  pkg/password      # Argon2 helper ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö hash/verify
  ```

## ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏±‡πã‡∏ß‡∏ü‡πà‡∏≠‡∏ô‡∏´‡∏∑‡πâ‡∏≠‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏•‡∏∏‡∏Å

### 1. ‡∏à‡∏±‡∏î‡πÅ‡∏à‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
‡∏ï‡∏±‡πâ‡∏á environment variable ‡∏ä‡∏µ‡πâ‡πÑ‡∏õ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡πÄ‡∏à‡πâ‡∏≤ (‡∏Ñ‡πà‡∏≤ default ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Å‡∏ï‡πå‡∏Å‡πá‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏¢)
```bash
export DATABASE_URL="postgres://in:in@localhost:5432/lindb"
```

‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á `users` ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏ö‡∏∞‡∏°‡∏µ (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á schema):
```sql
CREATE TABLE IF NOT EXISTS users (
    id SERIAL PRIMARY KEY,
    email TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    name TEXT NOT NULL,
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);
```

### 2. ‡∏£‡∏±‡∏ô‡πÅ‡∏ö‡∏ö Local Dev
```bash
go run ./cmd/server
```
‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏õ‡∏¥‡∏î `http://localhost:8080` ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏à‡∏∞‡∏£‡∏≠‡∏≠‡∏¢‡∏π‡πà ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÑ‡∏î‡πâ‡πÉ‡∏ô `cmd/server/main.go`

### 3. ‡∏£‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô Docker Compose (‡∏≠‡∏≠‡∏õ‡∏ä‡∏±‡∏ô)
```bash
docker compose up --build
```
‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á API ‡πÅ‡∏•‡∏∞ PostgreSQL ‡∏Ñ‡∏£‡∏ö‡∏ä‡∏∏‡∏î ‡∏ö‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏¢‡∏≠‡∏∞

## ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á API (‡∏à‡∏î‡πÑ‡∏ß‡πâ‡πÄ‡∏ô‡πâ‡∏≠)

| Method | Path                     | ‡∏ï‡∏µ‡πâ‡πÑ‡∏õ‡∏´‡∏≤‡∏≠‡∏∞‡∏´‡∏¢‡∏±‡∏á |
| ------ | ------------------------ | ------------- |
| POST   | `/auth/register`         | ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà (email/name ‡∏™‡πà‡∏á plain, password ‡∏™‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô SHA-256 hex) |
| POST   | `/auth/login`            | ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö |
| POST   | `/auth/change-password`  | ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‡∏ï‡∏£‡∏ß‡∏à‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô) |
| GET    | `/users`                 | ‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î |

- ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î payload/response ‡πÄ‡∏ï‡πá‡∏° ‡πÜ ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏≠‡πà‡∏≤‡∏ô‡πÉ‡∏ô `/docs/` (Swagger UI) ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏ü‡∏•‡πå `docs/openapi.yaml`
- ‡∏ó‡∏∏‡∏Å response ‡πÄ‡∏õ‡πã‡∏ô JSON ‡∏û‡∏£‡πâ‡∏≠‡∏° CORS header ‡πÄ‡∏Æ‡∏î‡∏Æ‡∏π‡πâ‡∏Å‡πà‡∏≠ ‡∏´‡∏∑‡πâ‡∏≠ front-end ‡∏ï‡πã‡∏≤‡∏°‡πÉ‡∏à‡πã

## ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤
- ‡∏Ñ‡πà‡∏≤ fallback ‡∏Ç‡∏≠‡∏á `DATABASE_URL` ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô `internal/db/postgres.go` ‡∏ñ‡πâ‡∏≤‡∏ö‡∏∞‡∏ï‡∏±‡πâ‡∏á env ‡∏à‡∏∞‡∏ä‡∏µ‡πâ‡πÑ‡∏õ `postgres://in:in@localhost:5432/lindb`
- DTO ‡∏ñ‡∏π‡∏Å‡πÇ‡∏¢‡∏Å‡πÑ‡∏õ‡πÑ‡∏ß‡πâ `internal/httpapi/dto` ‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏ã‡πâ‡∏≥ ‡πÜ ‡πÉ‡∏ô handler
- Handler `internal/httpapi/auth_handler.go` ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö SHA-256 hex ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö password/old_password/new_password ‡∏™‡πà‡∏ß‡∏ô email/name ‡∏ï‡∏£‡∏ß‡∏à‡πÅ‡∏Ñ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ß‡πà‡∏≤‡∏á
- Argon2 helper (`pkg/password/password.go`) ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ï‡∏µ‡πâ‡πÉ‡∏ä‡πâ
- Repository (`internal/user/repository.go`) ‡πÅ‡∏¢‡∏Å DB logic ‡∏´‡∏∑‡πâ‡∏≠‡πÄ‡∏ó‡∏™‡∏ï‡πå‡∏á‡πà‡∏≤‡∏¢ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô storage ‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏Å‡πà‡∏≠‡∏™‡∏∞‡∏î‡∏ß‡∏Å

## ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏∂‡∏î‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î (‡∏Å‡∏∂‡πä‡∏î‡πÄ‡∏ï‡∏¥‡∏á‡∏´‡∏≤‡∏¢‡∏≤‡∏ß ‡πÜ)
1. ‡πÅ‡∏ï‡πà‡∏á unit test ‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡πÉ‡∏à‡πã `auth.Service` ‡∏Å‡∏±‡∏ö‡∏ä‡∏∏‡∏î password hash/check
2. ‡πÄ‡∏û‡∏¥‡πà‡∏° lint ‡πÄ‡∏ä‡πà‡∏ô `golangci-lint` ‡∏´‡∏∑‡πâ‡∏≠‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô
3. ‡∏ú‡∏π‡∏Å JWT ‡∏´‡∏£‡∏∑‡∏≠ session layer ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡∏°‡∏µ endpoint ‡∏õ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ

‡πÄ‡∏Æ‡∏≤‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡∏≠‡∏á‡πÑ‡∏ß‡πâ‡∏´‡∏∑‡πâ‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏î `git push` ‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡∏≠‡∏ß‡∏î‡∏Ñ‡∏ô‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏ô‡πà‡∏≠ üöÄ
